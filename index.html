<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>JavaScript Visualizations - Homework</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        nav a { margin: 0 15px; text-decoration: none; color: navy; }
        section { margin-top: 60px; }
        canvas { max-width: 800px; margin: 20px auto; display: block; }
        .report { max-width: 800px; margin: auto; font-size: 15px; }
    </style>
</head>
<body>
<h1>JavaScript Visualization Homework - Rishitha Erupaka [#1030375]</h1>

<nav>
    <a href="#cars">Cars</a>
    <a href="#mutualfunds">Mutual Funds</a>
    <a href="#films">Films</a>
    <a href="#grocery">Grocery Stores</a>
    <a href="#cereals">Cereals</a>
</nav>

<section id="cars">
    <h2>Cars Visualization</h2>
    <div class="report">
        This bar chart displays the average horsepower of cars categorized by their country of origin: American, European, and Japanese.
        This visualization technique makes it easy to compare performance characteristics across regions.
        Using a bar chart here simplifies understanding of numerical differences in car engine strength among different origins.
    </div>
    <canvas id="chartCars"></canvas>
</section>

<section id="mutualfunds">
    <h2>Mutual Funds Visualization</h2>
    <div class="report">
        This grouped bar chart compares YTD, 5-year, and 10-year returns for different mutual fund categories.
        It effectively shows performance over time, enabling better investment decisions based on growth trends.
        The grouped format allows a clear, side-by-side comparison of each return metric across categories.
    </div>
    <canvas id="chartFunds"></canvas>
</section>

<section id="films">
    <h2>Films Visualization</h2>
    <div class="report">
        This scatter plot shows how film length relates to popularity, with points colored based on award status.
        This format is useful for spotting correlations and outliers in continuous data like movie duration and viewer appeal.
        Coloring based on awards adds an extra layer of insight into which movies achieved both popularity and recognition.
    </div>
    <canvas id="chartFilms"></canvas>
</section>

<section id="grocery">
    <h2>Grocery Stores Visualization</h2>
    <div class="report">
        This bar chart shows the average purchase amount grouped by payment method from grocery store survey data.
        It helps identify which payment types are associated with higher spending behavior.
        Bar charts are effective for summarizing grouped numerical values, especially when comparing spending patterns.
    </div>
    <canvas id="chartGrocery"></canvas>
</section>

<section id="cereals">
    <h2>Cereals Visualization</h2>
    <div class="report">
        This bubble chart compares sugar and protein content for various cereals.
        Each bubble represents a cereal, positioned by sugar and protein, and uniformly sized.
        This helps visualize nutritional differences in cereals and makes it easier to identify healthier options.
    </div>
    <canvas id="chartCereals"></canvas>
</section>

<script>
function loadCSV(file, callback) {
    Papa.parse(file, {
        download: true,
        header: true,
        complete: function(results) {
            callback(results.data);
        }
    });
}

loadCSV('cars.csv', function(data) {
    const hpByOrigin = {};
    data.forEach(row => {
        const origin = row.Origin;
        const hp = parseFloat(row.Horsepower);
        if (!isNaN(hp)) {
            if (!hpByOrigin[origin]) hpByOrigin[origin] = [];
            hpByOrigin[origin].push(hp);
        }
    });
    const labels = Object.keys(hpByOrigin);
    const dataPoints = labels.map(o => hpByOrigin[o].reduce((a,b) => a + b) / hpByOrigin[o].length);
    new Chart(chartCars, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{ label: 'Avg Horsepower', data: dataPoints, backgroundColor: 'skyblue' }]
        }
    });
});

loadCSV('mutualfunds.csv', function(data) {
    const labels = data.map(d => d.Category);
    const ytd = data.map(d => parseFloat(d.YTD));
    const yr5 = data.map(d => parseFloat(d['5YR']));
    const yr10 = data.map(d => parseFloat(d['10YR']));
    new Chart(chartFunds, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [
                { label: 'YTD', data: ytd, backgroundColor: 'lightcoral' },
                { label: '5YR', data: yr5, backgroundColor: 'orange' },
                { label: '10YR', data: yr10, backgroundColor: 'lightgreen' }
            ]
        }
    });
});

loadCSV('film.csv', function(data) {
    const points = [];
    const colors = [];
    data.forEach(row => {
        const len = parseFloat(row.Length);
        const pop = parseFloat(row.Popularity);
        if (!isNaN(len) && !isNaN(pop)) {
            points.push({ x: len, y: pop });
            colors.push(row.Awards === 'Yes' ? 'green' : 'red');
        }
    });
    new Chart(chartFilms, {
        type: 'scatter',
        data: {
            datasets: [{ label: 'Films', data: points, backgroundColor: colors }]
        },
        options: {
            scales: {
                x: { title: { display: true, text: 'Length (min)' } },
                y: { title: { display: true, text: 'Popularity' } }
            }
        }
    });
});

loadCSV('grocerystoresurvey.csv', function(data) {
    const byMethod = {};
    data.forEach(row => {
        const method = row.PaymentMethod;
        const amount = parseFloat(row.PurchaseAmount);
        if (!isNaN(amount)) {
            if (!byMethod[method]) byMethod[method] = [];
            byMethod[method].push(amount);
        }
    });
    const labels = Object.keys(byMethod);
    const values = labels.map(m => byMethod[m].reduce((a,b)=>a+b)/byMethod[m].length);
    new Chart(chartGrocery, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{ label: 'Avg Purchase Amount', data: values, backgroundColor: 'mediumpurple' }]
        }
    });
});

loadCSV('cereals.csv', function(data) {
    const bubbles = data.map(row => {
        return {
            label: row.Cereal,
            data: [{ x: parseFloat(row.Sugars), y: parseFloat(row.Protein), r: 6 }],
            backgroundColor: 'peru'
        }
    });
    new Chart(chartCereals, {
        type: 'bubble',
        data: { datasets: bubbles },
        options: {
            plugins: { legend: { display: false } },
            scales: {
                x: { title: { display: true, text: 'Sugar' } },
                y: { title: { display: true, text: 'Protein' } }
            }
        }
    });
});
</script>

</body>
</html>
